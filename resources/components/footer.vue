 <template>
    <div>
        <!-- Footer -->
        <div class="_1footer">
        <!-- <div class="_1footer"> -->
            <div class="container">
            <div class="_1footer_top">
                <div class="row">
                <div class="col-12 col-md">
                    <h2 class="_1footer_title">Support</h2>

                    <ul class="_1footer_list">
                    <li>
                        <a href="">Help Center</a>
                    </li>
                    <li>
                        <a href="">Covid 19 Safety</a>
                    </li>
                    <li>
                        <a href="">Country</a>
                    </li>
                    <li>
                        <a href="">Regions</a>
                    </li>
                    <li>
                        <a href="">Cites</a>
                    </li>
                    </ul>
                </div>
                <div class="col-12 col-md">
                    <h2 class="_1footer_title">About Us</h2>

                    <ul class="_1footer_list">
                    <li>
                        <a href="">About Company</a>
                    </li>
                    <li>
                        <a href="">Career</a>
                    </li>
                    <li>
                        <a href="">Commnuity</a>
                    </li>
                    <li>
                        <a href="">Investors</a>
                    </li>
                    </ul>
                </div>
                <div class="col-12 col-md">
                    <h2 class="_1footer_title">Booking</h2>

                    <ul class="_1footer_list">
                    <li>
                        <a href="">Booking</a>
                    </li>
                    <li>
                        <a href="">Terms</a>
                    </li>
                    <li>
                        <a href="">Rerort Concern</a>
                    </li>
                    </ul>
                </div>

                <div class="col-12 col-md-4 col-lg-4">
                    <!-- <h2 class="_1footer_title">Newsletter</h2> -->

                    <div class="elementor-image-box-content">
                        <h3 class="elementor-image-box-title">
                            <span class="mob-hide">Need help?</span> Call us: (+880) 1309 606092
                        </h3>
                        <p class="elementor-image-box-description">Monday - Friday: 8:00 - 21:00</p>
                        <ul class="_1footer_social">
                            <li>
                                <a href=""><Icon type="logo-facebook" /></a>
                            </li>
                            <li>
                                <a href=""><Icon type="logo-linkedin" /></a>
                            </li>
                            <li>
                                <a href=""><Icon type="logo-youtube" /></a>
                            </li>
                            <li>
                                <a href=""><Icon type="logo-googleplus" /></a>
                            </li>
                            </ul>
                    </div>

                    <div class="_1footer_input">
                    <input class="_1footer_int" placeholder="Enter Email Address">

                    <button class="_1footer_button"><Icon type="ios-send" /></button>
                    </div>
                </div>
                </div>
            </div>

            <div class="_1footer_bottom">
                <p class="_1footer_copy">Copyright 2022 baywatch.com . Design by Hussain shipu</p>

                <img class="_pay_img" src="/img/paymentLogo.svg" alt="" title=""/>
            </div>
            </div>
        </div> 
        <!-- Footer -->

        <!--NewsLetter section start-->
        <div  style="display:none" class="newsLetter-section section pt-95 pt-lg-75 pt-md-65 pt-sm-55 pt-xs-45 pb-100 pb-lg-80 pb-md-70 pb-sm-60 pb-xs-50">
            <div class="container">
                <div class="row">
                    <div class="col-lg-8 offset-lg-2">
                        <div class="newsletter-wrapper">
                            <!-- <p class="small-text">Special Ofers For Subscribers</p> -->
                            <p class="title_ten">Ten Percent Discount for <br/> <span class="title_ten_span"> Our Premium Customers</span></p>
                            <p class="short-desc">Your will get 10% discount on your each and every purchase by using Loyalty Card for lifetime.</p>
    
                            <!-- <div class="newsletter-form">
                                <form id="mc-form" class="mc-form">
                                    <input type="email" placeholder="Enter Your Email Address Here..." required>
                                    <button type="submit" value="submit">SUBSCRIBE!</button>
                                </form>
    
                            </div> -->
                            <!-- mailchimp-alerts Start -->
                            <div class="mailchimp-alerts">
                                <div class="mailchimp-submitting"></div><!-- mailchimp-submitting end -->
                                <div class="mailchimp-success"></div><!-- mailchimp-success end -->
                                <div class="mailchimp-error"></div><!-- mailchimp-error end --> 
                            </div>
                            <!-- mailchimp-alerts end -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!--NewsLetter section end-->

        <!--Footer section start-->
        <footer  style="display:none" class="footer-section section">

            <!--Footer Top start-->
            <div
                class="footer-top section pt-100 pt-lg-80 pt-md-70 pt-sm-60 pt-xs-50 pb-60 pb-lg-40 pb-md-30 pb-sm-15 pb-xs-5">
                <div class="container-fluid">
                    <div class="row">

                        <!--Footer Widget start-->
                        <div class="footer-widget col-lg-5 col-md-12 col-sm-6 col-12 mb-40 mb-xs-35">
                            <div class="_footer_main">
                                <div class="_footer_main_logo">
                                    <a href=""><img class="_footer_main_logo_img" src="/img/footerLogo.svg" alt="" title=""></a>
                                </div> 

                                <ul class="find_list">
                                    <li><p class="find">Find Apps on</p></li>
                                    <li>
                                        <a href=""><img src="/img/Google-Play-footer-.png"  alt="" title=""></a>
                                    </li>
                                    <li>
                                        <a href=""><img src="/img/App-Store-footer-.png"  alt="" title=""></a>
                                    </li>
                                </ul>
                            </div>
                            <!-- <div class="footer-logo">
                                <a href="index.html"><img src="/assets/logo.png" alt=""></a>
                            </div> -->
                            <!-- <p>Duis autem vel eum iriure dolor in hendrerit in vulputate velit esse molestie consequat, vel illum dolore eu feugiat nulla facilisis.</p>
                            <div class="f-social-title">
                                <h3>Follow Us On Social:</h3>
                            </div> -->
                            <!-- <div class="footer-social">
                                <a target="_blank" href="https://www.facebook.com/dreamsgallery"><i class="fa fa-facebook"></i></a>
                                <a target="_blank" href="https://www.instagram.com/dreamsgallerybd"><i class="fa fa-instagram"></i></a>
                                <a target="_blank" href="https://www.youtube.com/"><i class="fab fa-youtube"></i></a>
                                <a href="#"><i class="fa fa-twitter"></i></a>
                                <a href="#"><i class="fa fa-linkedin"></i></a>
                                <a href="#"><i class="fa fa-rss"></i></a>
                            </div> -->
                        </div>
                        <!--Footer Widget end-->

                        <div class="col-12 col-md-12 col-lg-7">
                            <div class="row ipad">
                                <!--Footer Widget start-->
                                <div class="footer-widget col-lg-3 col-md-4 col-sm-6 col-12 mb-40 mb-xs-35">
                                    <h4 class="title"><span class="text">Opening Time</span></h4>
                                    <p class="mb-15" v-for="(item,index) in openingTime" :key="index">{{item.content}}</p>
                                    <h4 class="opeaning-title">We Work All The Holidays</h4>
                                </div>
                                <!--Footer Widget end-->

                                <!--Footer Widget start-->
                                <div class="footer-widget col-lg-3 col-md-4 col-sm-6 col-12 mb-40 mb-xs-35">
                                    <h4 class="title"><span class="text">My Account</span></h4>
                                    <ul class="ft-menu">
                                        <li><a @click="goToLinkWithLogin('/my-account')">My account</a></li> 
                                        <li><a @click="goToLinkWithLogin('/wishlist')">Wishlist</a></li>
                                        <li><a @click="goToLinkWithLogin('/pre-order')">Pre Order</a></li>
                                        <li><a @click="goToLinkWithLogin('/my-account?tab=Orders')">Order Tracking</a></li>
                                        <!-- <li><nuxt-link to="/privacy">Privacy Policy</nuxt-link></li>
                                        <li><nuxt-link to="/privacy">Shipping Information</nuxt-link></li> -->
                                        <li><nuxt-link to="/faq">FAQs</nuxt-link></li>
                                    </ul>
                                </div>
                                <!--Footer Widget end-->

                                <!--Footer Widget start-->
                                <div class="footer-widget col-lg-3 col-md-4 col-sm-6 col-12 mb-40 mb-xs-35">
                                    <h4 class="title"><span class="text">About Us</span></h4>
                                    <ul class="ft-menu">
                                        <li><nuxt-link to="/privacy-policy">Privacy Policy</nuxt-link></li>
                                        <li><nuxt-link to="/payment-policy">Payment Policy</nuxt-link></li>
                                        <li><nuxt-link to="/shipping-policy">Shipping Policy</nuxt-link></li>
                                        <li><nuxt-link to="/exchange-return">Exchange & Return</nuxt-link></li>
                                        <li><nuxt-link to="/terms-conditions">Terms & Conditions</nuxt-link></li>

                                        <!-- <li><nuxt-link to="/about-us">About Us</nuxt-link></li>
                                        <li><nuxt-link to="/about-us">Shopping Guide</nuxt-link></li>
                                        <li><nuxt-link to="/shipping-policy">Delivery Information</nuxt-link></li>
                                        <li><nuxt-link to="/privacy">Privacy Policy</nuxt-link></li>
                                        <li><nuxt-link to="/privacy-policy">Privacy Policy</nuxt-link></li>
                                        <li><nuxt-link to="/about-us">Our Store</nuxt-link></li> -->
                                    </ul>
                                </div>
                                <!--Footer Widget end-->

                                <div class="col-12 col-lg-7 col-md-7">
                                    <p class="_copy">Copyright ©2020 Dreams Gallery. All rights reserved.</p>
                                </div>

                                <div class="col-12 col-lg-5 col-md-5">
                                    <div class="footer_bottom">
                                        <p class="footer_bottom_p">Secure Payments*</p>

                                        <img class="footer_bottom_img" src="/img/paymentLogo.svg" alt="" title=""/>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!--Footer Top end-->

            <!--Footer bottom start-->
            <!-- <div class="footer-bottom section">
                <div class="container">
                    <div class="row no-gutters">
                        <div class="col-12 ft-border pt-25 pb-25">
                            <div class="row justify-content-between align-items-center">
                                <div class="col-lg-6 col-md-6 col-sm-12 justify-content-center">
                                    <div class="copyright text-left">
                                        <p>Copyright &copy;2019 <nuxt-link to="/">Dreams Gallery</nuxt-link>. All rights reserved.</p>
                                    </div>
                                </div>

                                <div class="col-12 col-md-6 col-lg-6">
                                    <ul class="_payment">
                                        <li></li>
                                        <li></li>
                                        <li></li>
                                        <li></li>
                                        <li></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div> -->
            <!--Footer bottom end-->
           

        </footer>
        <!--Footer section end-->
        
        <!-- Modal Area Strat -->
        <!-- <transition name="slide-fade"> -->
            
        <Modal width="1400px" v-model="showQuickItem" :footer-hide="true" :mask-closable="false">
            <div slot="close">
                 <span style="font-size: 15px;color: #a8a8a8dd;" @click="showQuickItemOffFooter" ><i class="fas fa-times"></i></span>
            </div>
            <div>
                <div class="modal-body">
                    <div class="col-xl-12 col-lg-12">
                        <div class="row">
                            <div class="col-lg-5 col-md-6 quick">
                                <div class="_product_slider">
                                    <div class="_product_slider">
                                         <div class="product-slider-thumb">
                                             <figure>
                                                <image-magnifier
                                                :src="mainImage"
                                                :zoom-src="mainImage"
                                                width="400"
                                                height="400"
                                                zoom-width="555"
                                                zoom-height="555"
                                                ></image-magnifier>
                                                 
                                             </figure>
                                             
                                         </div>
                                         <div class="product-hooper">
                                             <hooper :itemsToShow="4" :infiniteScroll="isInfiniteScroll" :autoPlay="false">
                                                
                                                <slide v-for="(item,index) in quickItem.allImages " :key="index">
                                                    <div class="hooper-slider-item">
                                                        <figure
                                                        :class="(mainImageIndex == index) ? 'hooper-slider-item slider-active' : ''"
                                                        @click="mainImage = item.url, mainImageIndex = index">
                                                            <img :src="item.url" alt=""/>
                                                        </figure>
                                                    </div>
                                                </slide>
                                                <hooper-navigation v-if="isInfiniteScroll" slot="hooper-addons"></hooper-navigation>
                                            </hooper>
                                         </div>
                                </div>
                                    <!-- <Carousel   loop>
                                        <CarouselItem v-for="(item,index) in quickItem.allImages " :key="index">
                                            <div class="_product_slider_pic">
                                                <img :src="item.url" title="" alt="">
                                                 <image-magnifier :src="image"
                                                    :zoom-src="item.url"
                                                    width="400"
                                                    height="300"
                                                    zoom-width="400"
                                                    zoom-height="300">
                                                </image-magnifier>
                                            </div>
                                        </CarouselItem>
                                       
                                    </Carousel> -->
                                    
                                </div>
                            </div>
                            <div class="col-lg-7 col-md-6">
                                <!--Product Details Content Start-->
                                <div class="product-details-content">
                                    <!--Product Nav Start-->
                                    <!-- <div class="product-nav">
                                        <a href="#"><i class="fa fa-angle-left"></i></a>
                                        <a href="#"><i class="fa fa-angle-right"></i></a>
                                    </div> -->
                                    <!--Product Nav End-->
                                    <h2>{{quickItem.productName}} {{quickItem.model}}</h2>
                                    <div class="single-product-reviews">
                                         <template v-if="quickItem.avgRating==null">
                                            <i class="fa fa-star-o"></i>
                                            <i class="fa fa-star-o"></i>
                                            <i class="fa fa-star-o"></i>
                                            <i class="fa fa-star-o"></i>
                                            <i class="fa fa-star-o"></i>
                                        </template>
                                        <template v-else-if="quickItem.avgRating != null">
                                            <i :class="(quickItem.avgRating.averageRating>0)? 'fa fa-star active' : 'fa fa-star-o'"></i>
                                            <i :class="(quickItem.avgRating.averageRating>1)? 'fa fa-star active' : 'fa fa-star-o'"></i>
                                            <i :class="(quickItem.avgRating.averageRating>2)? 'fa fa-star active' : 'fa fa-star-o'"></i>
                                            <i :class="(quickItem.avgRating.averageRating>3)? 'fa fa-star active' : 'fa fa-star-o'"></i>
                                            <i :class="(quickItem.avgRating.averageRating>4)? 'fa fa-star active' : 'fa fa-star-o'"></i>
                                        </template>
                                       
                                       
                                        <a class="review-link" >({{quickItem.__meta__ ? quickItem.__meta__.allreviews_count : 0}} customer review)</a>
                                        <!-- <a class="review-link" >(1 customer review)</a> -->
                                    </div>
                                    <div class="single-product-price" v-if="quickItem.discount>0">
                                        <span  class="price new-price">৳ {{quickItem | disountPrice}} </span>
                                        <span class="regular-price">৳ {{quickItem.sellingPrice}}</span>
                                    </div>
                                    <div class="single-product-price" v-else>
                                        <span  class="price new-price">৳ {{quickItem.sellingPrice}} </span>
                                    </div>
                                    <div class="product-description" v-if="quickItem.description">
                                        <div>
                                            <div class="row">
                                                <div class="col-md-6" v-if="quickItem.description.material">
                                                    <p>Material: {{quickItem.description.material}}</p>
                                                </div>
                                                <div class="col-md-6" v-if="quickItem.description.size">
                                                    <p>Size: {{quickItem.description.size}}</p>
                                                </div>
                                                <div class="col-md-6" v-if="quickItem.description.color">
                                                    <p>Colour: {{quickItem.description.color}}</p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="single-product-quantity">
                                        <form class="add-quantity" v-on:submit.prevent>  
                                               <!--  <div class="product-quantity">
                                                    <input v-model="quantity" min="1"  type="number"> 
                                                </div> -->
                                                

                                            <div class="_select_box_all">
                                                <div  class="productSelectBox _pr_slct_bx" v-if="allColour.length>0">
                                                    <select class="wide _1select wide3" v-model="colour" v-on:change="getVariableProduct"  >
                                                        <option selected value="" disabled>Colour</option>
                                                        <option v-for="(item,index) in allColour" :key="index" :value="item.color">{{item.color}}</option> 
                                                    </select>
                                                </div>
                                                <div  class="productSelectBox _pr_slct_bx" v-if="allSize.length>0">
                                                    <select class="wide _1select wide3" v-model="size" v-on:change="getVariableProduct" placeholder="">
                                                        <option selected value="" disabled>Size</option>
                                                        <option v-for="(item,index) in allSize" :key="index" :value="item.size">{{item.size}}</option>
                                                       
                                                    </select>
                                                </div>
                                          
                                            </div>
                                                
                                            <div class="add-to-link" v-if="loading" >
                                                <button  class="btn"  >
                                                    <i class="ivu-load-loop ivu-icon ivu-icon-ios-loading"></i><span>Please wait...</span>
                                                </button>
                                            </div>


                                            <div class="add-to-link _pro_link2" v-else>
                                                 <div class="_pro_qty _pro_qty1">
                                                    <span @click="deQuantity"><i class="fas fa-minus"></i></span>
                                                    <input v-model="quantity" min="1"  type="number"> 
                                                    <span @click="inQuantity"><i class="fas fa-plus"></i></span>
                                                 </div>
                                                <button v-if=" product && product.id==0" class="btn _btn4 _btn2" @click="getVariableProduct" ><i class="ion-bag" ></i>Add to cart</button>
                                                <button v-else-if=" product && product.stock >= quantity"  class="btn _btn2 _btn4" @click="addToCartfooter(product)" ><i class="ion-bag"></i>Add to cart</button>
                                                <button v-else-if=" product && product.stock < quantity" class="btn  _btn2 _btn4" @click="addToPreOrder(product,quantity)"><i class="ion-bag"></i>Pre order</button>
                                            </div>
                                        </form>
                                    </div>
                                    <div class="wishlist-compare-btn" @click="storeWishList(quickItem)">
                                        <a class="wishlist-btn _btn6">Add to Wishlist</a>
                                        <!-- <a href="#" class="add-compare">Compare</a> -->
                                    </div>
                                    <div class="product-meta" v-if="quickItem.allgroup">
                                        <span class="posted-in">
                                                Brand: 
                                                <a >{{quickItem.allbrand.name}}</a>
                                        </span>
                                        <span class="posted-in">
                                                Categories: 
                                                <a >{{quickItem.allgroup.groupName}}</a>
                                        </span>
                                        <span class="posted-in">
                                                Subcategories: 
                                                <a >{{quickItem.allcategory.catName}}</a>
                                        </span>
                                    </div>
                                    <!-- <div class="single-product-sharing">
                                        <h3>Share this product</h3>
                                        <ul>
                                            <li><a href="#"><i class="fa fa-twitter"></i></a></li>
                                            <li><a href="#"><i class="fa fa-facebook"></i></a></li>
                                            <li><a href="#"><i class="fa fa-google-plus"></i></a></li>
                                            <li><a href="#"><i class="fa fa-pinterest"></i></a></li>
                                            <li><a href="#"><i class="fa fa-instagram"></i></a></li>
                                            <li><a href="#"><i class="fa fa-vimeo"></i></a></li>
                                        </ul>
                                    </div> -->
                                </div>
                                <!--Product Details Content End--> 
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </Modal>
        <!-- </transition> -->
        <!-- Modal Area End -->

        
    </div>
</template>
<script>
import {
  Hooper,
  Slide,
  Navigation as HooperNavigation
  } from 'hooper';

export default {
    components: {
    Hooper,
    Slide,
    HooperNavigation
  },
    data(){
        return{
            quantity:1,
            mainImageIndex: 0,
            mainImage: "",
            isInfiniteScroll: false,
            preMsg: false,
            size:'',
            colour:'',
            openingTime:[],
            allSize:[],
            allColour:[],
            product:{ id:0},
            loading:false,
        }
    },
    methods:{
        goToLinkWithLogin(link){
            if(!this.isLoggedIn) return this.$router.push('/login')
            return this.$router.push(link)
        },
        deQuantity(){
            if(this.quantity - 1 == 0) return
            this.quantity--
        },
        inQuantity(){
           
            this.quantity++
        },
        async getProductVariable(){
            this.loading = true
            const res = await this.callApi('get',`/app/getProductVariable/${this.quickItem.id}`)
            if(res.status == 200){
                this.allColour = res.data.colour
                this.allSize = res.data.size
               if(this.allColour.length == 0 && this.allSize.length == 0) this.getVariableProduct();
               else this.loading = false
            }
            else {
                this.swr();
                this.loading = false
            }
            
            
        },
        async getVariableProduct(){
            
            if(this.allColour.length>0 && this.colour == '') return this.i('Please Select a colour!')
            if(this.allSize.length>0 && this.size == '') return this.i('Please Select a Size!')
            let ob = {
                quantity: this.quantity,
                mproductId: this.quickItem.id,
                size:this.size,
                colour:this.colour
            }
            this.loading = true
            const res = await this.callApi('post',`/app/getVariableProduct`,ob)
            if(res.status == 200){
                this.product = res.data.finalProduct
            }
           
            else{
                this.swr(); 
            }
            this.loading = false

        },
        async AddProductVariableToCart(){
            
            if(this.allColour.length>0 && this.colour == '') return this.i('Please Select a colour!')
            if(this.allSize.length>0 && this.size == '') return this.i('Please Select a Size!')
            let ob = {
                quantity: this.quantity,
                mproductId: this.quickItem.id,
                size:this.size,
                colour:this.colour
            }
            this.loading = true
            const res = await this.callApi('post',`/app/checkVariableStock`,ob)
            if(res.status == 200){

            }
            else if(res.status == 401){
                this.i("Product Stock Out ")

                
            }
            else{
                this.swr(); 
            }
            this.loading = false

        },
        async addToCartfooter(product){
            product.img = this.quickItem.productImage
            product.discount = this.quickItem.discount 
            let flag = await this.addToCartServer(product,this.quantity);
            if(flag) this.showQuickItemOffFooter();
        },
        async showQuickItemOffFooter(product){
            this.allSize = [];
            this.allSize = [];
            this.colour = '';
            this.size = '';
            this.product ={ id:0}
            this.showQuickItemOff();
        }
    },
    watch: {  
        showQuickItem: function(newVal, oldVal) { // watch it
            // console.log('quickItem changed: ', newVal, ' | was: ', oldVal)
            if(newVal == true){
                if(this.quickItem.allImages[0].url){
                    this.mainImage = this.quickItem.allImages[0].url;
                    this.isInfiniteScroll = false
                }
                if(this.quickItem.allImages.length > 3) this.isInfiniteScroll = true
                this.quantity = 1
                this.getProductVariable()
                
            }
        },
        quantity: function(newVal,oldVal){
            if(newVal > this.product.stock  && !this.preMsg  ){
                this.preMsg = true;
                this.i("Stock Limit Exceeded. You can Pre Order your desire products.")
            }
            else if(newVal < this.product.stock) {
                this.preMsg = false;
            }
        }
    },
    async created(){
        const [res] = await Promise.all([
            this.callApi('get','/app/openingtime')
        ])
        if(res.status == 200){
            this.openingTime = res.data.openingtime
             
        }
    }
}
</script>
<style >
/* Enter and leave animations can use different */
/* durations and timing functions.              */
/* .slide-fade-enter-active {
  transition: all .3s ease;
}
.slide-fade-leave-active {
  transition: all .8s cubic-bezier(1.0, 0.5, 0.8, 1.0);
}
.slide-fade-enter, .slide-fade-leave-to{
  transform: translateX(10px);
  opacity: 0;
} */
/* .demo-carousel {
    height: 200px;
    line-height: 200px;
    text-align: center;
    color: #fff;
    font-size: 20px;
    background: #506b9e;
} */
._product_slider_pic{
    display: block;
    min-height: 200px;
}
.productSelectBox{
    background: #fff;
    /* border: 1px solid #ededed; */
    float: left;
    margin-right: 15px;
    padding: 0 10px;
    border-radius: 0;
    padding-left: 0px;
}
.add-to-link {
    padding-top: 40px;
}
</style>

    